<template>
  <Layout>
    <section class="projects">
      <article
        @click="goTo($event, project.node.path)"
        class="project"
        v-for="project in $page.projects.edges"
        :key="project.node.id"
      >
        <g-image
          class="project-thumbnail"
          :src="project.node.thumbnail.src"
          :alt="project.node.title"
        ></g-image>
        <ProjectMeta
          :title="project.node.title"
          :categories="project.node.categories"
          :year="project.node.year"
        />
      </article>
    </section>
  </Layout>
</template>

<page-query>
query Projects {
  projects: allProject {
    edges {
      node { 
        id
        path
        title
        year
        thumbnail
        categories
      }
    }
  }
}
</page-query>

<script>
import ProjectMeta from "@/components/ProjectMeta";

export default {
  components: {
    ProjectMeta
  },
  metaInfo: {
    titleTemplate: require("../data/theme.json").site_name
  },
  methods: {
    goTo(event, route) {
      const distanceScrolled = window.pageYOffset;
      const elementPosition = event.target.getBoundingClientRect().top;
      const totalOffset = distanceScrolled + elementPosition;
      const finalPosition = totalOffset - 167;

      // Scroll window so that the thumbnail is 12rem from the
      // top of the browser window, this will make a seamless transition.
      window.scrollTo({ top: finalPosition, behavior: "smooth" });

      // Now, navigate to the project page
      setTimeout(() => {
        this.$router.push(route);
      }, 450);
    }
  }
};
</script>

<style lang="scss" scoped>
.projects {
  margin: 0 2rem;
}
.project {
  width: 100%;
  margin-bottom: 4rem;
}
.project-thumbnail {
  display: block;
  width: 100%;
}
.rainbow {
    
   /* Chrome, Safari, Opera */
  -webkit-animation: rainbow 5s infinite; 
  
  /* Internet Explorer */
  -ms-animation: rainbow 5s infinite;
  
  /* Standar Syntax */
  animation: rainbow 5s infinite; 
}

/* Chrome, Safari, Opera */
@-webkit-keyframes rainbow{
  0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

/* Internet Explorer */
@-ms-keyframes rainbow{
   0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

/* Standar Syntax */
@keyframes rainbow{
    0%{color: orange;}	
  10%{color: purple;}	
	20%{color: red;}
  30%{color: CadetBlue;}
	40%{color: yellow;}
  50%{color: coral;}
	60%{color: green;}
  70%{color: cyan;}
  80%{color: DeepPink;}
  90%{color: DodgerBlue;}
	100%{color: orange;}
}

</style>

<style type="text/css">
body {
  cursor: url('data:image/x-icon;base64,AAACAAEAICAAAA0AAgCoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAADpAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAOkAAADoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/AAAA/wAAAP/w5fL/8OXy/wAAAP8AAAD/8OXy//Dl8v8AAAD/AAAA//Dl8v/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAD/AAAA/wAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v8AAAD/AAAA//Dl8v/w5fL/AAAA/wAAAP/w5fL/8OXy/wAAAP8AAAD/8OXy//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAD/AAAA//Dl8v/w5fL/8OXy/wAAAP8AAAD/8OXy//Dl8v8AAAD/AAAA//Dl8v/w5fL/AAAA/wAAAP/w5fL/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/AAAA/wAAAP/w5fL/8OXy/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAAAAAAD/AAAA/wAAAP8AAAAAAAAA/wAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AAAD/8OXy//Dl8v/w5fL/AAAA/wAAAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP/w5fL/8OXy//Dl8v8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA//Dl8v/w5fL/8OXy/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wAAAP8AAAD/AAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAA/wAAAP8AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//gAD//4AA//+AAP//gAD//gAAP/4AAD/4AAA/+AAAP+AAAD/gAAA/4AAAD+AAAA+AAAAPgAAADgAAAA4AAAAOAAAADgAAAA+GAAAPhgAAD/4AAA/+AAA//gBEP/4Af//+A////gP///4D///+A////gP///4D////h////4f/8='), auto; }
</style>
